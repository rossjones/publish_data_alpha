{% extends 'main_with_navbar.html' %}
{% load static %}

{% block page_title %}
  Add dataset title
{% endblock %}

{% block inner_content %}

  {% if form.errors %}
    <div
        class="error-summary"
        role="group"
        aria-labelledby="error-summary-heading-example-1"
        tabindex="-1">
      <h1
          class="heading-medium error-summary-heading"
          id="error-summary-heading-example-1">
        There was a problem
      </h1>

      <ul class="error-summary-list">
        {% for error in form.non_field_errors %}
          <li>
            {{ error }}
            <span class="visuallyhidden">.</span>
          </li>
        {% endfor %}

        {% for error in form.title.errors %}
          <li>
            <a href="#id_title_label">Please provide a valid title</a>
            <span class="visuallyhidden">.</span>
          </li>
        {% endfor %}

        {% for error in form.description.errors %}
          <li>
            <a href="#id_description_label">Please provide a description</a>
            <span class="visuallyhidden">.</span>
          </li>
        {% endfor %}
      </ul>
    </div>
  {% endif %}

  <h1 class="heading-large">
    Create a dataset
  </h1>

  <p>You must give the dataset a title and a description.</p>

  <form method="post" class="form" action="{{ target_url }}">
    {% csrf_token %}

    <fieldset>
      <legend class="visuallyhidden">
        Provide a title and a description
      </legend>

      <div class="form-group {% if form.title.errors %}error{% endif %}">
        <label
            class="form-label"
            for="id_title"
            id="id_title_label">
          Title
        </label>
        {% for error in form.title.errors %}
          <span class="error-message">{{ error }}</span>
        {% endfor %}
        <span class="form-hint">
          Titles should be 65 characters or less, including spaces.<br/>
          Most search engines will shorten titles if they’re longer than
          this.
        </span>
        <input
            class="form-control form-control-2-3"
            id="id_title"
            name="title"
            type="text"
            value="{{ dataset.title }}"/>
      </div>

      <div class="form-group {% if form.description.errors %}error{% endif %}">
        <label
            class="form-label bold"
            for="id_description"
            id="id_description_label">
          Description
        </label>
        {% for error in form.description.errors %}
          <span class="error-message">{{ error }}</span>
        {% endfor %}
        <span class="form-hint">
          Write a description of the dataset. Along with the title,
          the first sentence of the description will appear in search
          results.
          <br/>
          <br/>
          Include any relevant words and phrases that you didn’t use in
          the title to help users find your dataset.
        </span>
        <textarea
            rows="10"
            class="form-control form-control-2-3"
            id="id_description"
            name="description">{{ dataset.description }}</textarea>
      </div>
    </fieldset>

    <div class="form-group">
      <input type="submit" class="button" value="Continue"/>
    </div>
  </form>

{% endblock %}
